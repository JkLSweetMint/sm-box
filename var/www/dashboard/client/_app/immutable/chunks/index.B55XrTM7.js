const c=1,l=e=>`/${e.name}/api/v${e.version??"1.0"}`,h=async function(e){e.flags=e.flags?e.flags:0;try{let t={method:e.method??"GET",credentials:e.flags&1?"include":"omit",headers:e.headers};t.method!="GET"&&(t.body=JSON.stringify(e.data));let s="";e.query&&(s="?"+Object.entries(e.query).map(r=>Array.isArray(r[1])?r[1].map(i=>`${r[0]}=${i}`):[`${r[0]}=${r[1]}`]).map(r=>r.join("&")).join("&"));const n=await fetch(e.url+s,t),o=Object.fromEntries([...n.headers.entries()]);return{data:await n.json(),meta:{headers:o}}}catch(t){throw new Error(`Failed to call a request: ${t}`)}},f=async function(e){return(await fetch(window.location.toString(),{method:"HEAD"})).headers.get(e)||null};export{h as F,l as G,c as W,f as a};
