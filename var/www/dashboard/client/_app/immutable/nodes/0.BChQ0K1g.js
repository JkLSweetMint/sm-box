import{s as q,c as A,k,o as C,n as g,a as I,b as D,u as H,e as N,f as F}from"../chunks/scheduler.C73wj8LU.js";import{S as O,i as W,m as P,s as U,k as E,n as V,f as j,o as x,g as w,r as $,p as z,q as v,d as L,u as B,w as J,e as K,c as Q,v as X,l as Y}from"../chunks/index.DcrltIXL.js";import{r as b}from"../chunks/index.CzHE4dtV.js";import{R as Z,s as R,E as S,C as G}from"../chunks/Root.Bm4t62zu.js";import{G as ee}from"../chunks/Text.CGJ98vSV.js";import{G as M,F as te,W as se}from"../chunks/index.B55XrTM7.js";import{S as re}from"../chunks/index.BW2gudtc.js";function oe(i){let r;const o=i[4].default,e=D(o,i,i[3],null);return{c(){e&&e.c()},l(t){e&&e.l(t)},m(t,n){e&&e.m(t,n),r=!0},p(t,n){e&&e.p&&(!r||n&8)&&H(e,o,t,t[3],r?F(o,t[3],n,null):N(t[3]),null)},i(t){r||(v(e,t),r=!0)},o(t){$(e,t),r=!1},d(t){e&&e.d(t)}}}function ae(i){let r,o="<h1>Loading</h1>";return{c(){r=K("div"),r.innerHTML=o,this.h()},l(e){r=Q(e,"DIV",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1r1299i"&&(r.innerHTML=o),this.h()},h(){Y(r,"class","loading-page")},m(e,t){w(e,r,t)},p:g,i:g,o:g,d(e){e&&L(r)}}}function ne(i){let r,o,e,t,n,u;r=new Z({});const y=[ae,oe],l=[];function f(s,c){return s[0]?0:1}return e=f(i),t=l[e]=y[e](i),{c(){P(r.$$.fragment),o=U(),t.c(),n=E()},l(s){V(r.$$.fragment,s),o=j(s),t.l(s),n=E()},m(s,c){x(r,s,c),w(s,o,c),l[e].m(s,c),w(s,n,c),u=!0},p(s,[c]){let d=e;e=f(s),e===d?l[e].p(s,c):(J(),$(l[d],1,1,()=>{l[d]=null}),z(),t=l[e],t?t.p(s,c):(t=l[e]=y[e](s),t.c()),v(t,1),t.m(n.parentNode,n))},i(s){u||(v(r.$$.fragment,s),v(t),u=!0)},o(s){$(r.$$.fragment,s),$(t),u=!1},d(s){s&&(L(o),L(n)),B(r,s),l[e].d(s)}}}function ie(i,r,o){let e,t,n=g,u=()=>(n(),n=I(s,a=>o(6,t=a)),s);i.$$.on_destroy.push(()=>n());let{$$slots:y={},$$scope:l}=r,f=!0,s=b();u();const c=b({auth:M({name:"authentication"}),i18n:M({name:"i18n"})});A(i,c,a=>o(5,e=a)),k("services",c);const d=async function(a){var _;const m=ee("dashboard.toasts.error.title",t)||"An error occured";try{const p=e[a.service];if(!p)throw new Error(`Failed to call service method: service "${p}" is not defined`);let h=await te({url:`${p}${a.url}`,method:a.method,query:a.query,headers:a.headers,data:a.data,flags:se});return h.data.code!=200&&a.showToast&&R({data:{title:m,description:`${(_=h.data.error)==null?void 0:_.message}`,type:S,flags:G}}),h.data.headers=h.meta.headers,h.data}catch(p){return a.showToast&&R({data:{title:m,description:`${p}`,type:S,flags:G}}),{code:500,code_message:"",status:"fatal"}}};k("CallServiceMethod",d);const T=async function(a){var _;let m=await d({service:"i18n",url:"/texts/dictionary",query:{paths:a},showToast:!0});if(!(!m||m.code!=200))return b(((_=m.data)==null?void 0:_.dictionary)??{})};return k("i18nLoadDictionary",T),C(()=>{o(0,f=!0),re.GetInstance().Load().GetProperty("direction")=="rtl"&&document.documentElement.setAttribute("dir","rtl"),o(0,f=!1)}),C(async()=>{u(o(1,s=await T("dashboard.toasts")??b()))}),i.$$set=a=>{"$$scope"in a&&o(3,l=a.$$scope)},[f,s,c,l,y]}class pe extends O{constructor(r){super(),W(this,r,ie,ne,q,{})}}export{pe as component};
