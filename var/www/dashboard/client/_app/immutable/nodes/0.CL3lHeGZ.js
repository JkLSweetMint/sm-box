import{s as T,b as E,u as L,d as S,e as q,c as G,f as p,o as A,n as M,a as D}from"../chunks/scheduler.VUuLSjLj.js";import{S as F,i as I,n as N,j as O,q as H,k as W,r as j,a as k,u as b,v,d as U,w as x}from"../chunks/index.YcojCQiS.js";import{r as _}from"../chunks/index.oxanXEPY.js";import{R as z,G as w,F as B,W as J,s as g,E as R,C}from"../chunks/index.BzIH2BPK.js";import{G as K}from"../chunks/Text.7olNyAOr.js";function P(n){let a,r,o;a=new z({});const c=n[3].default,t=E(c,n,n[2],null);return{c(){N(a.$$.fragment),r=O(),t&&t.c()},l(e){H(a.$$.fragment,e),r=W(e),t&&t.l(e)},m(e,i){j(a,e,i),k(e,r,i),t&&t.m(e,i),o=!0},p(e,[i]){t&&t.p&&(!o||i&4)&&L(t,c,e,e[2],o?q(c,e[2],i,null):S(e[2]),null)},i(e){o||(b(a.$$.fragment,e),b(t,e),o=!0)},o(e){v(a.$$.fragment,e),v(t,e),o=!1},d(e){e&&U(r),x(a,e),t&&t.d(e)}}}function Q(n,a,r){let o,c,t=M,e=()=>(t(),t=D(m,s=>r(5,c=s)),m);n.$$.on_destroy.push(()=>t());let{$$slots:i={},$$scope:h}=a,m;const f=_({auth:w({name:"authentication"}),i18n:w({name:"i18n"})});G(n,f,s=>r(4,o=s)),p("services",f);const y=async function(s){const l=K("dashboard.toasts.error.title",c)||"An error occured";try{const u=o[s.service];if(!u)throw new Error(`Failed to call service method: service "${u}" is not defined`);let d=await B({url:`${u}${s.url}`,method:s.method,query:s.query,headers:s.headers,data:s.data,flags:J});return d.data.code!=200&&s.showToast&&g({data:{title:l,description:`${d.data.error.message}`,type:R,flags:C}}),d.data.headers=d.meta.headers,d.data}catch(u){g({data:{title:l,description:`${u}`,type:R,flags:C}})}};p("CallServiceMethod",y);const $=async function(s){let l=await y({service:"i18n",url:"/texts/dictionary",query:{paths:s},showToast:!0});if(!(!l||l.code!=200))return _(l.data.dictionary)};return p("i18nLoadDictionary",$),A(async()=>{e(r(0,m=await $("dashboard.toasts")??_()))}),n.$$set=s=>{"$$scope"in s&&r(2,h=s.$$scope)},[m,f,h,i]}class te extends F{constructor(a){super(),I(this,a,Q,P,T,{})}}export{te as component};
