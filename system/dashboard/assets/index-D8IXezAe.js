var F=Object.defineProperty;var L=(t,e,s)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var d=(t,e,s)=>L(t,typeof e!="symbol"?e+"":e,s);import{S as O,N as T,O as R,Q as B,R as G,T as m,a6 as g,U as f,V as Y,W as A,X as D,Y as M,Z as U,_ as J,$ as X,a0 as k,at as q,aI as H,ax as Q}from"./index-CyW-OYYf.js";function V(t){let e,s,i,n,a,_;const u=t[8].default,o=B(u,t,t[7],null);return{c(){e=G("button"),o&&o.c(),m(e,"type",s=t[6](t[1])),m(e,"class",i=g("btn"+f(t[1]&N?"no-animation":"")+f(t[2])+f(t[1]&E?"plain":"")+f(t[1]&P?"circle":"")+f(t[0]))+" svelte-jj20js"),m(e,"style",t[3])},m(l,c){Y(l,e,c),o&&o.m(e,null),t[9](e),n=!0,a||(_=A(e,"click",function(){H(t[4])&&t[4].apply(this,arguments)}),a=!0)},p(l,[c]){t=l,o&&o.p&&(!n||c&128)&&D(o,u,t,t[7],n?U(u,t[7],c,null):M(t[7]),null),(!n||c&2&&s!==(s=t[6](t[1])))&&m(e,"type",s),(!n||c&7&&i!==(i=g("btn"+f(t[1]&N?"no-animation":"")+f(t[2])+f(t[1]&E?"plain":"")+f(t[1]&P?"circle":"")+f(t[0]))+" svelte-jj20js"))&&m(e,"class",i),(!n||c&8)&&m(e,"style",t[3])},i(l){n||(J(o,l),n=!0)},o(l){X(o,l),n=!1},d(l){l&&k(e),o&&o.d(l),t[9](null),a=!1,_()}}}const N=1,W=2,E=4,Z=8,z=16,P=32,K="primary",te="";function v(t,e,s){let{$$slots:i={},$$scope:n}=e,a;const _=function(r){if(l&W||!a)return;const h=document.createElement("span");h.classList.add("ripple");const j=r.offsetX,I=r.offsetY;h.style.left=`${j}px`,h.style.top=`${I}px`,a.appendChild(h),setTimeout(()=>{h.classList.add("run"),h.addEventListener("transitionend",()=>h.remove())})},u=function(r){return r&Z?"submit":r&z?"reset":"button"};let{class:o=""}=e,{flags:l=0}=e,{palette:c=K}=e,{style:y=""}=e,{OnClick:b=()=>{}}=e;q(()=>{a&&(a.removeEventListener("mousedown",_),a.addEventListener("mousedown",_))});function C(r){Q[r?"unshift":"push"](()=>{a=r,s(5,a)})}return t.$$set=r=>{"class"in r&&s(0,o=r.class),"flags"in r&&s(1,l=r.flags),"palette"in r&&s(2,c=r.palette),"style"in r&&s(3,y=r.style),"OnClick"in r&&s(4,b=r.OnClick),"$$scope"in r&&s(7,n=r.$$scope)},[o,l,c,y,b,a,u,n,i,C]}class se extends O{constructor(e){super(),T(this,e,v,V,R,{class:0,flags:1,palette:2,style:3,OnClick:4})}}class p{constructor(e){d(this,"name");d(this,"type");d(this,"fields");this.name=e.name,this.type=e.type??"string",this.fields=e.fields}Field(e){if(e=="")return this;if(this.fields){if(e.includes(".")){const[s,i]=e.split(".",1),n=this.fields.find(a=>a.name==s);return n?n.Field(i):void 0}return this.fields.find(s=>s.name==e)}}Parse(e){switch(this.type){case"string":return`${e}`;case"number":const s=Number(e);return Number.isNaN(s)?0:s;case"boolean":return e=="y"||e=="Y"||e=="yes"||e=="Yes"||e=="t"||e=="T"||e=="true"||e=="True"||e=="1"||e==1||e==!0;case"object":let i={};return typeof e!="object"||this.fields&&this.fields.forEach(n=>i[n.name]=n.Parse(e[n.name])),i;case"date":switch(typeof e){case"string":case"number":return new Date(e);default:return new Date(0)}}}}class x{constructor(e){d(this,"_name");d(this,"_key");d(this,"_fields");d(this,"_data");this._name=e.name,this._key=e.key??e.name.toLowerCase(),this._fields=e.fields,this._data={}}get _dataName(){return`[${this._name}]:`}_FindField(e){if(e.includes(".")){const[s,i]=e.split(".",1),n=this._fields.find(a=>a.name==s);return n?n.Field(i):void 0}return this._fields.find(s=>s.name==e)}_NestedProperty(e,s,i,n=0,a="get"){if(e.length<1||n>=e.length)throw new Error("empty key");const _=e[0];var u=s[_];if(n==e.length-1)switch(a){case"get":return u;case"set":return u=i}if(typeof u!="object")throw new Error(`Incorrect path to property: "${e.slice(0,n+1).join(".")}"`);return this._NestedProperty(e,u,i,n+1,a)}GetProperty(e){const s=this._FindField(e);if(s&&(e=e.trim(),e!=""))return e.includes(".")?this._NestedProperty(e.split("."),this._data,void 0,0,"get"):s.Parse(this._data[e])}SetProperty(e,s){const i=this._FindField(e);if(!i)throw new Error(`Unknown field: "${e}"`);if(e=e.trim(),e=="")throw new Error("Empty key");return e.includes(".")?this._NestedProperty(e.split("."),this._data,i.Parse(s),0,"set"):this._data[e]=i.Parse(s),this}Clear(){localStorage.removeItem(this._key),this._data={}}Save(){localStorage.setItem(this._key,btoa(this._dataName+JSON.stringify(this._data)))}Load(){const e=localStorage.getItem(this._key);if(!e)return this._data={},this;try{const i=JSON.parse(atob(e).replace(this._dataName,""));this._data=Object.fromEntries(this._fields.map(n=>[n.name,n.Parse(i[n.name])]))}catch{throw new Error("Bad decode")}return new Date>this._data.expires_at&&this.Clear(),this}}const w=class w extends x{static GetInstance(){return this._instance==null&&(this._instance=new w),this._instance}constructor(){super({name:"Token",key:"tok",fields:[new p({name:"id",type:"number"}),new p({name:"user_id",type:"number"}),new p({name:"project_id",type:"number"}),new p({name:"expires_at",type:"date"}),new p({name:"issued_at",type:"date"}),new p({name:"data",type:"string"})]})}};d(w,"_instance",null);let S=w;export{se as B,P as C,te as G,W as N,E as P,Z as S,S as T,N as a};
